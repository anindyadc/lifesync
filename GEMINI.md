# LifeSync Project (Generated by Gemini)

This document provides a concise overview of the LifeSync application, its setup, and deployment process. For a more detailed guide, please refer to `Readme.md`.

## Project Overview

LifeSync is a React application that integrates with Firebase for backend services. It includes several modules for managing tasks, expenses, incidents, and investment, all secured by user authentication and Firestore rules. The Taskflow app within LifeSync now includes advanced features like subtask management and progress tracking.

## Features (Incident Logger App)

*   **Edit and Delete Incidents:** Users can now edit existing incident details and permanently delete reported incidents.

## Features (Taskflow App)

*   **Create and Manage Tasks:** Add, edit, and delete tasks with details like priority, due date, and category.
*   **Subtask Management:** Add, edit, delete, and mark subtasks as complete.
*   **Time Logging:** Users can add new time log entries for tasks and subtasks, and delete existing ones. Direct editing of time logs is not supported; instead, users should delete and re-add entries if modifications are required.
*   **Date Range Filtering for Reports:** The time report now includes 'From' and 'To' date selectors, allowing users to filter reported time logs. This filter is applied to both the displayed data and the CSV/PDF export options.

*   **Frontend:** React (with Vite)
*   **Backend:** Firebase (Authentication, Firestore)
*   **Styling:** Tailwind CSS
*   **Deployment:** GitHub Pages via GitHub Actions

## Local Development Setup

### 1. Prerequisites

*   Node.js (LTS version)
*   Git

### 2. Initial Setup

1.  **Clone the Repository:**
    ```bash
    git clone <repository-url>
    cd <repository-directory>
    ```

2.  **Install Dependencies:**
    ```bash
    npm install
    ```

### 3. Firebase Configuration

1.  **Create a Firebase Project:** Set up a new project in the [Firebase Console](https://console.firebase.google.com/).
2.  **Enable Services:**
    *   Enable **Email/Password Authentication**.
    *   Create a **Firestore Database** in **production mode**.
3.  **Get Credentials:** From your Firebase project settings, get the `firebaseConfig` object values.
4.  **Set Environment Variables:**
    *   Create a `.env` file in the project root.
    *   Add your Firebase credentials to it, prefixed with `VITE_`:
        ```
        VITE_FIREBASE_API_KEY=your_api_key
        VITE_FIREBASE_AUTH_DOMAIN=your_auth_domain
        VITE_FIREBASE_PROJECT_ID=your_project_id
        VITE_FIREBASE_STORAGE_BUCKET=your_storage_bucket
        VITE_FIREBASE_MESSAGING_SENDER_ID=your_sender_id
        VITE_FIREBASE_APP_ID=your_app_id
        ```
    *   Ensure `.env` is listed in your `.gitignore` file.

### 4. Firestore Security Rules

The security rules are defined in `firestore.rules`. These are critical for ensuring users can only access their own data.

**Important:** You must deploy these rules to your Firebase project via the Firebase Console for security to be effective.

### 5. Running the Application

Once the setup and configuration are complete, run the local development server:

```bash
npm run dev
```

## Deployment

This project is configured for automated deployment to GitHub Pages.

1.  **GitHub Secrets:** Add your Firebase environment variables as secrets to your GitHub repository under `Settings > Secrets and variables > Actions`.
2.  **Push to `main`:** The GitHub Action defined in `.github/workflows/deploy.yml` will automatically trigger on a push to the `main` branch, building and deploying the application.

## Firestore Data Structure

All user-specific data is stored in a nested structure under the `artifacts/{appId}/users/{userId}/` path.

### User Profile

#### `userProfiles` collection
*   **Path**: `/artifacts/default-app-id/public/data/userProfiles/{userId}`
*   `uid` (string): The user's Firebase Authentication UID.
*   `email` (string): The user's email address.
*   `displayName` (string): The user's display name.
*   `role` (string): The user's role (e.g., 'user', 'admin').
*   `allowedApps` (array): A list of app modules the user can access.
*   `joinedAt` (Timestamp): The timestamp when the user profile was created.

### `walletwatch`

#### `expenses` collection
*   `amount` (number): The transaction amount.
*   `description` (string): A brief description of the expense.
*   `category` (string): The category of the expense (e.g., Food, Travel).
*   `group` (string): A grouping for the expense.
*   `paymentMode` (string): The method of payment.
*   `date` (Timestamp): The date of the transaction.
*   `reimbursementStatus` (string): Status of reimbursement.
*   `relatedId` (string): ID of a related transaction.
*   `createdAt` (Timestamp): Timestamp of creation.
*   `updatedAt` (Timestamp): Timestamp of last update.

#### `settings` collection
This collection contains a single document `walletConfig` for user-specific settings.
*   `categories` (array): An array of category objects, each with `{ id, label, color, bg }`.

### `taskflow`

#### `tasks` collection
*   `title` (string): The title of the task.
*   `description` (string): Detailed description of the task.
*   `priority` (string): Priority level (e.g., Low, Medium, High).
*   `status` (string): Current status (e.g., To Do, In Progress, Done).
*   `dueDate` (string): The due date of the task.
*   `category` (string): The category of the task.
*   `progress` (number): The progress of the task (0-100).
*   `subtasks` (array): An array of subtask objects.
*   `timeLogs` (array): An array of time log objects.
*   `createdAt` (Timestamp): Timestamp of creation.
*   `updatedAt` (Timestamp): Timestamp of last update.

### `investment`

#### `investment` collection
*   `holder` (string): Who holds the investment (e.g., Self, Joint).
*   `type` (string): The type of investment (e.g., FD, Stocks).
*   `name` (string): The name or identifier for the investment.
*   `amountEncrypted` (string): The investment amount, AES encrypted.
*   `maturityDate` (string): The date the investment matures.
*   `details` (string): Additional details about the investment.
*   `createdAt` (Timestamp): Timestamp of creation.
*   `updatedAt` (Timestamp): Timestamp of last update.

### `incidentlogger`

#### `incidents` collection
*   `title` (string): A summary of the incident.
*   `status` (string): The current status (`open`, `progress`, `resolved`).
*   `priority` (string): The priority level (`low`, `medium`, `high`, `critical`).
*   `resolutionNotes` (string): Notes on how the incident was resolved.
*   `reportedAt` (Timestamp): Timestamp when the incident was reported.
*   `updatedAt` (Timestamp): Timestamp of last update.

### `changemanager`

#### `changelogs` collection
*   `serverName` (string): The name of the server affected.
*   `application` (string): The application affected (optional).
*   `type` (string): The type of change (e.g., Update, Patch, Reboot).
*   `status` (string): The status of the change (`success`, `pending`, `failed`).
*   `title` (string): A summary of the change.
*   `description` (string): A detailed description of the change.
*   `parameters` (string): Any parameters that were changed.
*   `date` (Timestamp): The date the change was implemented.
*   `performedBy` (string): The user who performed the change.
*   `createdAt` (Timestamp): Timestamp of creation.
